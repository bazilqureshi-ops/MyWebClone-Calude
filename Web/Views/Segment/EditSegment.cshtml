@using Emse.QMagic.Web.Models;
@model Emse.QMagic.Web.Models.qmService
@{
	ViewBag.Title = "EditSegment";
	Layout = "~/Views/Shared/_Layout.cshtml";
	qmSegment data = ViewBag.data;
	List<qmService> service = ViewBag.service;
	List<qmAutoTransferRule> atrs = ViewBag.atrs;
}

<script>
    $(document).on('submit', 'form', function () {
        var button = $(this).find(':submit');
        setTimeout(function () {
            button.attr('disabled', 'disabled');
        }, 0);
    });
</script>

<div class="row">
	<div class="col-xs-12 col-md-8 col-md-offset-2 col-lg-8 col-lg-offset-2">
		<div class="card">
			<div class="card-header">
				Segment Management
			</div>
			<div class="card-body">
				@using (Html.BeginForm())
				{
					@Html.AntiForgeryToken()

					<div class="form-horizontal">
						@Html.ValidationSummary(true, "", new { @class = "text-danger" })
						@Html.HiddenFor(model => data.SegmentID)

						<div class="col-xs-12 col-md-12 col-lg-12">
							<div class="form-group">
								<label class="col-md-2 control-label">Service Name</label>

								<div class="col-md-10">
									<select name="ServiceID" id="ServiceID" class="select2">
										@foreach (qmService item in service)
										{
											if (item.ServiceID == data.ServiceID)
											{
												<option selected="selected" value="@item.ServiceID">@item.ServiceName</option>
											}
											else
											{
												<option value="@item.ServiceID">@item.ServiceName</option>
											}
										}
									</select>
								</div>
							</div>
						</div>

						<div class="col-xs-12 col-md-12 col-lg-12">
							<div class="form-group">
								<label class="col-md-2 control-label">Auto Transfer Route Name</label>

								<div class="col-md-10">
									<select name="ATRID" id="ATRID" class="select2">
										<option value="">Select..</option>
										@foreach (var item in atrs)
										{
											if (item.AutoTransferRuleID == data.ATRID)
											{
												<option selected="selected" value="@item.AutoTransferRuleID">@item.AutoTransferName</option>
											}
											else
											{
												<option value="@item.AutoTransferRuleID">@item.AutoTransferName</option>
											}
										}
									</select>
								</div>
							</div>
						</div>

						<div class="col-xs-12 col-md-12 col-lg-12">
							<div class="form-group">
								<label class="col-md-2 control-label">Segment Name</label>

								<div class="col-md-10">
									@Html.EditorFor(model => data.SegmentName, new { htmlAttributes = new { @class = "form-control" } })
									@Html.ValidationMessageFor(model => data.SegmentName, "", new { @class = "text-danger" })
								</div>
							</div>
						</div>

						<div class="col-xs-12 col-md-12 col-lg-12">
							<div class="form-group">
								<label class="col-md-2 control-label">Segment Prefix</label>

								<div class="col-md-10">
									@Html.EditorFor(model => data.SegmentPrefix, new { htmlAttributes = new { @class = "form-control" } })
									@Html.ValidationMessageFor(model => data.SegmentPrefix, "", new { @class = "text-danger" })
								</div>
							</div>
						</div>

						<div class="col-xs-12 col-md-12 col-lg-12">
							<div class="form-group">
								<label class="col-md-2 control-label">Ticket Range</label>

								<div class="col-md-5">
									@Html.EditorFor(model => data.TicketStartNumber, new { htmlAttributes = new { @class = "form-control" } })
									@Html.ValidationMessageFor(model => data.TicketStartNumber, "", new { @class = "text-danger" })
								</div>
								<div class="col-md-5">
									@Html.EditorFor(model => data.TicketFinishNumber, new { htmlAttributes = new { @class = "form-control" } })
									@Html.ValidationMessageFor(model => data.TicketFinishNumber, "", new { @class = "text-danger" })
								</div>
							</div>
						</div>

						<div class="col-xs-12 col-md-12 col-lg-12">
							<div class="form-group">
								<label class="col-md-2 control-label">Segment Priority</label>

								<div class="col-md-10">
									@Html.EditorFor(model => data.SegmentPriority, new { htmlAttributes = new { @class = "form-control" } })
									@Html.ValidationMessageFor(model => data.SegmentPriority, "", new { @class = "text-danger" })
								</div>
							</div>
						</div>

						<div class="form-group">
							<div class="col-md-12 text-right">
								<a href="../Segment" class="btn btn-default">Cancel</a>
								<button type="submit" class="btn btn-primary">Save</button>
							</div>
						</div>
					</div>
				}
			</div>
		</div>
	</div>
</div>
